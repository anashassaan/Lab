<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Advanced Web Calculator</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      background-color: #f8f9fa;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .calculator {
      width: 380px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      padding: 20px;
      position: relative;
    }

    .display {
      height: 60px;
      background: #e9ecef;
      border-radius: 8px;
      text-align: right;
      font-size: 1.5rem;
      padding: 10px;
      overflow-x: auto;
    }

    .menu-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 1.5rem;
      cursor: pointer;
      color: #6c757d;
    }

    .submenu {
      position: absolute;
      top: 40px;
      right: 10px;
      background: white;
      border: 1px solid #dee2e6;
      border-radius: 8px;
      display: none;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      z-index: 10;
    }

    .submenu a {
      display: block;
      padding: 10px 15px;
      text-decoration: none;
      color: #212529;
    }

    .submenu a:hover {
      background-color: #f1f3f5;
    }

    .hidden {
      display: none !important;
    }

    .mode-title {
      font-size: 1rem;
      text-align: center;
      margin-top: 10px;
      color: #6c757d;
    }
  </style>
</head>
<body>

  <div class="calculator">
    <div class="menu-btn">⋯</div>
    <div class="submenu">
      <a href="#" id="basicMode">Basic Calculator</a>
      <a href="#" id="scientificMode">Scientific Mode</a>
      <a href="#" id="unitMode">Unit Converter</a>
      <a href="#" id="currencyMode">Currency Converter</a>
    </div>

    <div id="calculatorMode" class="mode-title">Basic Calculator</div>
    <div class="display" id="display">0</div>

    <!-- BASIC CALCULATOR -->
    <div id="basicCalculator">
      <div class="row g-2 mt-2">
        <div class="col-3"><button class="btn btn-danger w-100" onclick="clearDisplay()">C</button></div>
        <div class="col-3"><button class="btn btn-warning w-100" onclick="backspace()">⌫</button></div>
        <div class="col-3"><button class="btn btn-secondary w-100" onclick="appendValue('/')">÷</button></div>
        <div class="col-3"><button class="btn btn-secondary w-100" onclick="appendValue('*')">×</button></div>

        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('7')">7</button></div>
        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('8')">8</button></div>
        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('9')">9</button></div>
        <div class="col-3"><button class="btn btn-secondary w-100" onclick="appendValue('-')">−</button></div>

        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('4')">4</button></div>
        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('5')">5</button></div>
        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('6')">6</button></div>
        <div class="col-3"><button class="btn btn-secondary w-100" onclick="appendValue('+')">+</button></div>

        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('1')">1</button></div>
        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('2')">2</button></div>
        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('3')">3</button></div>
        <div class="col-3"><button class="btn btn-primary w-100" onclick="calculate()">=</button></div>

        <div class="col-6"><button class="btn btn-light w-100" onclick="appendValue('0')">0</button></div>
        <div class="col-6"><button class="btn btn-light w-100" onclick="appendValue('.')">.</button></div>
      </div>
    </div>

    <!-- SCIENTIFIC CALCULATOR -->
    <div id="scientificCalculator" class="hidden">
      <div class="row g-2 mt-2">
        <div class="col-3"><button class="btn btn-danger w-100" onclick="clearDisplay()">C</button></div>
        <div class="col-3"><button class="btn btn-warning w-100" onclick="backspace()">⌫</button></div>
        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('(')">(</button></div>
        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue(')')">)</button></div>

        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('Math.sqrt(')">√</button></div>
        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('Math.sin(')">sin</button></div>
        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('Math.cos(')">cos</button></div>
        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('Math.tan(')">tan</button></div>

        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('Math.log10(')">log</button></div>
        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('Math.exp(')">exp</button></div>
        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('Math.PI')">π</button></div>
        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('Math.E')">e</button></div>

        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('7')">7</button></div>
        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('8')">8</button></div>
        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('9')">9</button></div>
        <div class="col-3"><button class="btn btn-secondary w-100" onclick="appendValue('/')">÷</button></div>

        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('4')">4</button></div>
        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('5')">5</button></div>
        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('6')">6</button></div>
        <div class="col-3"><button class="btn btn-secondary w-100" onclick="appendValue('*')">×</button></div>

        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('1')">1</button></div>
        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('2')">2</button></div>
        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('3')">3</button></div>
        <div class="col-3"><button class="btn btn-secondary w-100" onclick="appendValue('-')">−</button></div>

        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('0')">0</button></div>
        <div class="col-3"><button class="btn btn-light w-100" onclick="appendValue('.')">.</button></div>
        <div class="col-3"><button class="btn btn-primary w-100" onclick="calculate()">=</button></div>
        <div class="col-3"><button class="btn btn-secondary w-100" onclick="appendValue('+')">+</button></div>
      </div>
    </div>

    <!-- UNIT CONVERTER -->
    <div id="unitConverter" class="hidden">
      <div class="mt-3">
        <select id="unitType" class="form-select mb-2">
          <option value="kmToMiles">Kilometers → Miles</option>
          <option value="kgToLbs">Kilograms → Pounds</option>
          <option value="cToF">Celsius → Fahrenheit</option>
        </select>
        <input type="text" id="unitInput" class="form-control mb-2 text-end" placeholder="Enter value" readonly>
        <div class="row g-2 mb-2">
          <div class="col-3"><button class="btn btn-danger w-100" onclick="unitClear()">C</button></div>
          <div class="col-3"><button class="btn btn-warning w-100" onclick="unitBack()">⌫</button></div>
          <div class="col-6"><button class="btn btn-success w-100" onclick="convertUnit()">Convert</button></div>
        </div>
        <div class="row g-2">
          <div class="col-3" onclick="unitAppend('7')"><button class="btn btn-light w-100">7</button></div>
          <div class="col-3" onclick="unitAppend('8')"><button class="btn btn-light w-100">8</button></div>
          <div class="col-3" onclick="unitAppend('9')"><button class="btn btn-light w-100">9</button></div>
          <div class="col-3" onclick="unitAppend('.')"><button class="btn btn-light w-100">.</button></div>
          <div class="col-3" onclick="unitAppend('4')"><button class="btn btn-light w-100">4</button></div>
          <div class="col-3" onclick="unitAppend('5')"><button class="btn btn-light w-100">5</button></div>
          <div class="col-3" onclick="unitAppend('6')"><button class="btn btn-light w-100">6</button></div>
          <div class="col-3" onclick="unitAppend('0')"><button class="btn btn-light w-100">0</button></div>
          <div class="col-3" onclick="unitAppend('1')"><button class="btn btn-light w-100">1</button></div>
          <div class="col-3" onclick="unitAppend('2')"><button class="btn btn-light w-100">2</button></div>
          <div class="col-3" onclick="unitAppend('3')"><button class="btn btn-light w-100">3</button></div>
        </div>
        <div class="mt-2" id="unitResult"></div>
      </div>
    </div>

    <!-- CURRENCY CONVERTER -->
    <div id="currencyConverter" class="hidden">
      <div class="mt-3">
        <select id="currencyType" class="form-select mb-2">
          <option value="usdToPkr">USD → PKR</option>
          <option value="pkrToUsd">PKR → USD</option>
          <option value="eurToUsd">EUR → USD</option>
          <option value="jpyToUsd">JPY → USD</option>
          <option value="gbpToUsd">GBP → USD</option>
          <option value="usdToGbp">USD → GBP</option>
        </select>
        <input type="text" id="currencyInput" class="form-control mb-2 text-end" placeholder="Enter amount" readonly>
        <div class="row g-2 mb-2">
          <div class="col-3"><button class="btn btn-danger w-100" onclick="currencyClear()">C</button></div>
          <div class="col-3"><button class="btn btn-warning w-100" onclick="currencyBack()">⌫</button></div>
          <div class="col-6"><button class="btn btn-success w-100" onclick="convertCurrency()">Convert</button></div>
        </div>
        <div class="row g-2">
          <div class="col-3" onclick="currencyAppend('7')"><button class="btn btn-light w-100">7</button></div>
          <div class="col-3" onclick="currencyAppend('8')"><button class="btn btn-light w-100">8</button></div>
          <div class="col-3" onclick="currencyAppend('9')"><button class="btn btn-light w-100">9</button></div>
          <div class="col-3" onclick="currencyAppend('.')"><button class="btn btn-light w-100">.</button></div>
          <div class="col-3" onclick="currencyAppend('4')"><button class="btn btn-light w-100">4</button></div>
          <div class="col-3" onclick="currencyAppend('5')"><button class="btn btn-light w-100">5</button></div>
          <div class="col-3" onclick="currencyAppend('6')"><button class="btn btn-light w-100">6</button></div>
          <div class="col-3" onclick="currencyAppend('0')"><button class="btn btn-light w-100">0</button></div>
          <div class="col-3" onclick="currencyAppend('1')"><button class="btn btn-light w-100">1</button></div>
          <div class="col-3" onclick="currencyAppend('2')"><button class="btn btn-light w-100">2</button></div>
          <div class="col-3" onclick="currencyAppend('3')"><button class="btn btn-light w-100">3</button></div>
        </div>
        <div class="mt-2" id="currencyResult"></div>
      </div>
    </div>

  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const display = document.getElementById('display');
    const submenu = document.querySelector('.submenu');
    const modeTitle = document.getElementById('calculatorMode');

    document.querySelector('.menu-btn').addEventListener('click', () => {
      submenu.style.display = submenu.style.display === 'block' ? 'none' : 'block';
    });

    window.onclick = (event) => {
      if (!event.target.matches('.menu-btn')) submenu.style.display = 'none';
    };

    // Calculator Core
    function appendValue(value) {
      if (display.innerText === '0' || display.innerText === 'Error') display.innerText = '';
      display.innerText += value;
    }

    function clearDisplay() { display.innerText = '0'; }
    function backspace() { display.innerText = display.innerText.slice(0, -1) || '0'; }

    function calculate() {
      try { display.innerText = eval(display.innerText); }
      catch { display.innerText = 'Error'; }
    }

    // Mode Switching
    const sections = {
      basic: document.getElementById('basicCalculator'),
      scientific: document.getElementById('scientificCalculator'),
      unit: document.getElementById('unitConverter'),
      currency: document.getElementById('currencyConverter')
    };

    function showSection(section) {
      Object.values(sections).forEach(sec => sec.classList.add('hidden'));
      sections[section].classList.remove('hidden');
    }

    document.getElementById('basicMode').onclick = () => { showSection('basic'); modeTitle.innerText = 'Basic Calculator'; };
    document.getElementById('scientificMode').onclick = () => { showSection('scientific'); modeTitle.innerText = 'Scientific Calculator'; };
    document.getElementById('unitMode').onclick = () => { showSection('unit'); modeTitle.innerText = 'Unit Converter'; };
    document.getElementById('currencyMode').onclick = () => { showSection('currency'); modeTitle.innerText = 'Currency Converter'; };

    // Unit Converter Logic
    function unitAppend(val) {
      const input = document.getElementById('unitInput');
      input.value += val;
    }
    function unitClear() { document.getElementById('unitInput').value = ''; document.getElementById('unitResult').innerText = ''; }
    function unitBack() { 
      let i = document.getElementById('unitInput');
      i.value = i.value.slice(0, -1);
    }
    function convertUnit() {
      const type = document.getElementById('unitType').value;
      const val = parseFloat(document.getElementById('unitInput').value);
      let result = '';
      if (isNaN(val)) result = 'Enter valid number';
      else if (type === 'kmToMiles') result = `${val} km = ${(val * 0.621371).toFixed(3)} miles`;
      else if (type === 'kgToLbs') result = `${val} kg = ${(val * 2.20462).toFixed(3)} lbs`;
      else if (type === 'cToF') result = `${val}°C = ${((val * 9 / 5) + 32).toFixed(2)}°F`;
      document.getElementById('unitResult').innerText = result;
    }

    // Currency Converter Logic (fixed rates)
    function currencyAppend(val) {
      const input = document.getElementById('currencyInput');
      input.value += val;
    }
    function currencyClear() { document.getElementById('currencyInput').value = ''; document.getElementById('currencyResult').innerText = ''; }
    function currencyBack() {
      let i = document.getElementById('currencyInput');
      i.value = i.value.slice(0, -1);
    }
    function convertCurrency() {
      const type = document.getElementById('currencyType').value;
      const val = parseFloat(document.getElementById('currencyInput').value);
      let result = '';
      if (isNaN(val)) result = 'Enter valid amount';
      else if (type === 'usdToPkr') result = `$${val} = ${(val * 280).toFixed(2)} PKR`;
      else if (type === 'pkrToUsd') result = `PKR ${val} = ${(val / 280).toFixed(2)} USD`;
      else if (type === 'usdToGbp') result = `$${val} = ${(val * 0.80).toFixed(2)} GBP`;
      else if (type === 'jpyToUsd') result = `¥${val} = ${(val * 0.0073).toFixed(2)} USD`;
      else if (type === 'eurToUsd') result = `€${val} = ${(val * 1.09).toFixed(2)} USD`;
      else if (type === 'gbpToUsd') result = `£${val} = ${(val * 1.25).toFixed(2)} USD`;
      document.getElementById('currencyResult').innerText = result;
    }
  </script>
</body>
</html>
